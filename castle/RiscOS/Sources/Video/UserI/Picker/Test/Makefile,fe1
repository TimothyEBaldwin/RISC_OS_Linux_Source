# This source code in this file is licensed to You by Castle Technology
# Limited ("Castle") and its licensors on contractual terms and conditions
# ("Licence") which entitle you freely to modify and/or to distribute this
# source code subject to Your compliance with the terms of the Licence.
# 
# This source code has been made available to You without any warranties
# whatsoever. Consequently, Your use, modification and distribution of this
# source code is entirely at Your own risk and neither Castle, its licensors
# nor any other person who has contributed to this source code shall be
# liable to You for any loss or damage which You may suffer as a result of
# Your use, modification or distribution of this source code.
# 
# Full details of Your rights and obligations are set out in the Licence.
# You should have received a copy of the Licence with this source code file.
# If You have not received a copy, the text of the Licence is available
# online at www.castle-technology.co.uk/riscosbaselicence.htm
# 
VPATH = @ <Support$Dir>

CC = cc -c -ISupport:,OS: -fachK -wp ${THROWBACK} -depend !Depend
OBJASM = ObjAsm ${THROWBACK} -depend !Depend -stamp -quit
LINK   = Link
LIBS = OSLib:o.oslib CLib:o.Stubs

OBJS = o.application o.callback o.riscos o.task o.trace o.m o.hostfs

ASMS = s.main s.application s.callback s.riscos s.task

INCS = i.main i.application i.callback i.riscos i.task

all: Test
   @Do Announce "Made <Obey$Dir>"

asms: ${ASMS}

incs: ${INCS}

Test: o.main ${OBJS} ${LIBS}
   ${LINK} -output Test o.main ${OBJS} ${LIBS}
   Access Test WR/R
   SetType Test Absolute

clean:
   -Destroy ${OBJS} ${ASMS} ${INCS} Test

o.trace: h.hostfs

.SUFFIXES: .o .c .s .i .h .def
.c.s:;     ${CC} -S -o $@ $<
.c.o:;     ${CC} -c -o $@ $<
.s.o:;     ${OBJASM} -from $< -to $@
.c.i:;     ${CC} -E -C $< > $@
.def.o:;   DefMod -l -o l.$* < $<
           LibFile -c -o $@ -via ViaFile
           Wipe l.$* ~C~VR
.def.h:;   DefMod -h < $< > $@

# Dynamic dependencies:

