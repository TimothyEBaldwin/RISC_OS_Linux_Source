DIM buffer% 100
SYS "OS_ReadVarVal","Sys$ReturnCode",buffer%,100,0,3 TO ,R$
R% = VAL(R$)
PRINT '"RISC OS terminating with exit code ";R%'

REM For rpcemu
H%=OPENOUT"_done"
BPUT#H%,"exit " + STR$(R%) + CHR$(10)
CLOSE#H%
*Remove done
*Rename _done done

REM For Linux Port
VDU 7
SYS "IXSupport_LinuxSyscall",R%,,,,,,,1
