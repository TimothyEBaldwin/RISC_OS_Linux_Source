#include <stdint.h>

#ifndef __GCC__
#define __attribute__(X)
#endif


union report {
  enum {
    ev_mouse,
    ev_keydown,
    ev_keyup,
    ev_mode_sync,
  } reason;
  struct {
    int reason;
    uint32_t x, y, buttons;
  } mouse;
  struct {
    int reason;
    uint32_t code;
  } key;
};

union command {
  enum {
    c_mode_change,
    c_set_palette,
    c_pointer,
  } reason;
  struct {
    int reason;
    int vidc[16];
  } mode;
  struct palette {
    int reason;
    unsigned colour, index, type;
  } palette;
  struct pointer {
    int reason;
    uint8_t width, height, active_x, active_y;
    uint8_t visable;
    uint8_t data[];
  } pointer;
  uint8_t pad[33 * 8];
};
